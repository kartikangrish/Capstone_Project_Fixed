<div class="container mt-5 mb-5">
  <div class="row justify-content-center">
    <div class="col-lg-7">
      <div class="card shadow-lg border-0 rounded-4 overflow-hidden">
        
        <div class="card-header border-0 p-4 text-center text-white" style="background: linear-gradient(135deg, #1a3c5e 0%, #2c537a 100%);">
          <i class="bi bi-patch-check-fill fs-1 text-warning mb-2"></i>
          <h2 class="fw-bold mb-0">Service Excellence Survey</h2>
          <p class="mb-0 opacity-75">Your insights help us navigate towards better quality</p>
        </div>

        <div class="card-body p-5 bg-white">
          <form (ngSubmit)="onSubmit()" #form="ngForm" novalidate>
            
            <h5 class="text-navy fw-bold mb-3 border-bottom pb-2">
              <i class="bi bi-person-badge me-2"></i>Customer Information
            </h5>
            <div class="row g-3 mb-4">
              <div class="col-md-6">
                <label class="form-label small fw-bold text-uppercase text-muted">First Name</label>
                <input type="text" class="form-control form-control-lg bg-light" 
                       [ngClass]="{'is-invalid': firstName.invalid && firstName.touched, 'is-valid': firstName.valid && firstName.touched}"
                       [(ngModel)]="feedback.customer.firstName" name="firstName" 
                       #firstName="ngModel" required minlength="2" placeholder="Enter name">
                <div class="invalid-feedback">First name is required (min 2 chars).</div>
              </div>

              <div class="col-md-6">
                <label class="form-label small fw-bold text-uppercase text-muted">Email Address</label>
                <input type="email" class="form-control form-control-lg bg-light" 
                       [ngClass]="{'is-invalid': email.invalid && email.touched, 'is-valid': email.valid && email.touched}"
                       [(ngModel)]="feedback.customer.email" name="email" 
                       #email="ngModel" required email placeholder="email@maritime.com">
                <div class="invalid-feedback">Please enter a valid email address.</div>
              </div>
            </div>

            <h5 class="text-navy fw-bold mb-3 border-bottom pb-2">
              <i class="bi bi-ship me-2"></i>Product Experience
            </h5>
            <div class="mb-4">
              <label class="form-label small fw-bold text-uppercase text-muted">Select Product/Service</label>
              <div class="input-group">
                <span class="input-group-text bg-light border-0"><i class="bi bi-search"></i></span>
                <input type="text" class="form-control form-control-lg bg-light" 
                       [ngClass]="{'is-invalid': prodName.invalid && prodName.touched}"
                       [(ngModel)]="feedback.product.name" name="productName" 
                       #prodName="ngModel" required placeholder="e.g., Radar System X1">
              </div>
              <div *ngIf="prodName.invalid && prodName.touched" class="text-danger small mt-1">Product name is required.</div>
            </div>

            <div class="mb-4 text-center py-3 rounded-3 bg-light">
              <label class="form-label d-block fw-bold mb-3">Overall Satisfaction</label>
              <div class="star-rating fs-2">
                <i *ngFor="let star of [1,2,3,4,5]" 
                   class="bi pe-2 cursor-pointer" 
                   [ngClass]="feedback.rating >= star ? 'bi-star-fill text-warning' : 'bi-star text-secondary'"
                   (click)="feedback.rating = star"></i>
              </div>
              <p class="small text-muted mt-2">Currently selected: <strong>{{feedback.rating}} Stars</strong></p>
            </div>

            <div class="mb-4">
              <label class="form-label small fw-bold text-uppercase text-muted">Detailed Feedback</label>
              <textarea class="form-control bg-light" 
                        [ngClass]="{'is-invalid': comment.invalid && comment.touched}"
                        [(ngModel)]="feedback.comment" name="comment" rows="5" 
                        #comment="ngModel" required minlength="10"
                        placeholder="Please share your detailed experience with us..."></textarea>
              <div class="invalid-feedback">Please provide at least 10 characters of feedback.</div>
            </div>

            <div class="d-grid gap-2">
              <button type="submit" class="btn btn-lg text-white shadow-sm py-3 fw-bold" 
                      [disabled]="!form.valid || isSubmitting"
                      style="background-color: #16a085; transition: 0.3s;">
                <span *ngIf="!isSubmitting"><i class="bi bi-send-fill me-2"></i>Submit My Feedback</span>
                <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm"></span>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>